<% if @gift.errors.any? %>
  <aside class="alert alert-danger m-3" role="alert">
    <%= @gift.errors.full_messages.join(",") %>
  </aside>
<% end %>
<section class="mt-2 pt-3">
<h1 class="h2 text-center text-uppercase text-tracked">Check Out</h1>
<h2 class="h4 mt-4"><%= @gift.product.name %></h2>
<h3 class="h5 font-weight-normal mb-3"><%= number_to_currency(@gift.product.price_cents / 100) %></h3>
<%= form_with model: @gift, local: true  do |gift_form| %>
  <div class="form-row">
    <div class="panel panel-default col-md-6">
      <div class="panel-heading h5 text-center"> Gifter Information </div>
      <div class="panel-body">
        <div class="form-group col-md-12 border rounded p-3">
          <%= gift_form.fields_for Gifter.new do |gifter_form| %>
            <div class="form-group">
              <%= gifter_form.label :first_name, "First Name" %>
              <%= gifter_form.text_field :first_name, value: "Yanny", required: true, class: "form-control" %>
            </div>
            <div class="form-group">
              <%= gifter_form.label :last_name, "Last Name" %>
              <%= gifter_form.text_field :last_name, value: "Castrillon", required: true, class: "form-control" %>
            </div>
            <div class="form-group">
              <%= gifter_form.label :email, "Email" %>
              <%= gifter_form.text_field :email, value: 'yanny.castrillon@gmail.com', required: true, class: "form-control" %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
    <div class="form-group col-md-1"></div>
    <div class="panel panel-default col-md-5">
      <div class="panel-heading h5 text-center"> Child Information </div>
      <div class="panel-body">
        <div class="form-group col-md-12 border rounded p-3">
          <%= gift_form.fields_for Child.new do |child_form| %>
            <div class="form-group col-md-12">
              <%= child_form.label :full_name, "Full Name" %>
              <%= child_form.text_field :full_name, value: "Tyrion Lannister", required: true, class: "form-control" %>
            </div>
            <div class="form-group col-md-12">
              <%= child_form.label :birthdate, "Birthdate" %>
              <%= child_form.date_field :birthdate, value: (Time.now - 20.days).strftime("%Y-%m-%d"), required: true, class: "form-control", data: { provide:'datepicker' } %>
            </div>
            <div class="form-group col-md-12">
              <%= child_form.label :parent_name, "Parent Name" %>
              <%= child_form.text_field :parent_name, value: "Jamie Lannister", required: true, class: "form-control" %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
  <div class="form-row">
    <%= gift_form.hidden_field :product_id %>
  </div>
  <div class="form-row">
    <div class="border rounded p-3 bg-light col-md-6">
     <%= gift_form.fields_for @order do |order_form| %>
      <div class="form-group col-md-12">
        <%= order_form.label :credit_card_number %>
        <%= order_form.password_field :credit_card_number, placeholder: "0000 0000 0000 0000", class: "form-control" %>
      </div>
      <div class="form-row">
        <div class="form-group col-md-6">
          <%= order_form.label :expiration_month %>
          <%= order_form.month_field :expiration_month, class: "form-control" %>
        </div>
        <div class="form-group col-md-6">
          <%= order_form.label :expiration_year %>
          <%= order_form.select :expiration_year, 2000..2030, {}, { class: "form-control" } %>
        </div>
      </div>
     <% end %>
    </div>
    <div class="col-md-1"></div>
    <div class="border rounded p-3 col-md-5">
      <div class="form-group col-md-12">
        <%= gift_form.label :message, "Message: " %>
        <%= gift_form.text_area :message, value: "Enjoy this new toy!", size: "20x6", class: "form-control" %>
      </div>
    </div>
  </div>
  <div class="p-3">
    <%= gift_form.submit("Purchase Gift", class: "btn btn-primary btn-lg") %>
  </div>
<% end %>
</section>
